/* ============================================
   aiMessage — Apple Messages Clone + Terminal
   ============================================ */

/* --- CSS Variables --- */
:root {
  --bg: #f5f5f5;
  --sidebar-bg: #ffffff;
  --user-bubble: #007AFF;
  --primary-text: #1a1a1a;
  --secondary-text: rgba(26, 26, 26, 0.45);
  --divider: rgba(0, 0, 0, 0.08);
  --active-border: #007AFF;
  --status-running: #34C759;
  --status-done: #007AFF;
  --status-idle: #636366;
  --status-error: #FF3B30;
  --hover-bg: rgba(0, 0, 0, 0.04);
  --active-bg: rgba(0, 0, 0, 0.07);
  --selected-bg: rgba(0, 122, 255, 0.08);
  --input-bg: rgba(0, 0, 0, 0.05);
  --surface: #ffffff;
  --elevated: #efefef;
}

/* --- Reset & Base --- */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  overflow: hidden;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro', 'SF Pro Text', 'Helvetica Neue', sans-serif;
  font-size: 15px;
  color: var(--primary-text);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* --- App Shell --- */
#app {
  height: 100%;
  width: 100%;
  position: relative;
}

.hidden {
  display: none !important;
}

/* ============================================
   HOME VIEW — Two-column dashboard
   ============================================ */
#home-view {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  background: var(--bg);
  position: relative;
}

/* Inner content wrapper — constrains width on wide displays */
.dashboard-inner {
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 40px 40px 120px;
  box-sizing: border-box;
}

/* --- Dashboard Header --- */
.dashboard-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 0 20px;
  flex-shrink: 0;
}

.dashboard-greeting {
  font-size: 28px;
  font-weight: 600;
  letter-spacing: -0.3px;
  color: var(--primary-text);
}

/* --- Home header: title only on mobile (kept for mobile) --- */
.home-header {
  display: none; /* Hidden on desktop */
  padding: 16px 20px 4px;
  flex-shrink: 0;
}

.home-header .mobile-title {
  font-size: 32px;
  font-weight: 700;
  letter-spacing: -0.5px;
}

/* --- Unified Floating Bottom Bar (search + compose pill) --- */
.bottom-bar {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 48px);
  max-width: 560px;
  height: 52px;
  background: #ffffff;
  border-radius: 26px;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06);
  display: flex;
  align-items: center;
  padding: 0 6px 0 16px;
  gap: 8px;
  z-index: 100;
  border: 1px solid rgba(0, 0, 0, 0.07);
}

.bottom-bar .bottom-bar-search-icon {
  width: 16px;
  height: 16px;
  color: rgba(26, 26, 26, 0.35);
  flex-shrink: 0;
}

.bottom-bar #home-search {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-size: 15px;
  color: #1a1a1a;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  min-width: 0;
}

.bottom-bar #home-search::placeholder {
  color: rgba(26, 26, 26, 0.35);
}

.compose-btn-inner {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #007AFF;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: transform 150ms ease, background 150ms ease;
  color: #ffffff;
}

.compose-btn-inner:hover {
  background: #0066dd;
  transform: scale(1.05);
}

.compose-btn-inner:active {
  transform: scale(0.96);
}

.compose-btn-inner svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

@media (max-width: 600px) {
  .bottom-bar {
    left: 16px;
    right: 16px;
    width: auto;
    max-width: none;
    transform: none;
    bottom: 16px;
  }
}

/* ============================================
   DASHBOARD — Two-column layout
   ============================================ */

/* Outer wrapper that sits below the header and above the toolbar */
.dashboard-columns {
  display: grid;
  grid-template-columns: 280px 1fr;
  width: 100%;
  gap: 0;
}

/* Vertical divider between the two columns */
.dashboard-columns::after {
  content: none; /* divider done via border on right column */
}

/* Each column */
.dashboard-col {
  padding-right: 32px;
  min-width: 0;
  overflow: hidden;
}

.dashboard-col.col-recent {
  padding-right: 0;
  padding-left: 32px;
  border-left: 1px solid var(--divider);
}

/* Section label */
.dashboard-section-label {
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--secondary-text);
  padding: 0 0 12px 0;
  display: block;
}

/* ---- Project rows (left column) ---- */
.project-row {
  display: flex;
  align-items: center;
  padding: 14px 0;
  cursor: pointer;
  position: relative;
  border-bottom: 1px solid var(--divider);
  transition: background 150ms ease;
  border-radius: 4px;
  margin: 0 -8px;
  padding-left: 8px;
  padding-right: 8px;
}

.project-row:last-child {
  border-bottom: none;
}

.project-row:hover {
  background: var(--hover-bg);
}

.project-row-body {
  flex: 1;
  min-width: 0;
}

.project-row-name {
  display: flex;
  align-items: center;
  font-size: 16px;
  font-weight: 500;
  color: var(--primary-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.project-row-meta {
  font-size: 13px;
  color: var(--secondary-text);
  margin-top: 2px;
}

/* Status dots cluster (right side of project row) */
.project-dots {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  margin-left: 12px;
}

.project-dots .status-dot {
  width: 8px;
  height: 8px;
}

.project-dots-overflow {
  font-size: 11px;
  color: var(--secondary-text);
  font-weight: 500;
  margin-left: 2px;
}

/* Empty state */
.dashboard-empty {
  font-size: 14px;
  color: var(--secondary-text);
  padding: 24px 0;
}

/* ---- Recent session rows (right column) ---- */
.recent-row {
  display: flex;
  flex-direction: column;
  padding: 12px 0;
  cursor: pointer;
  border-bottom: 1px solid var(--divider);
  transition: background 150ms ease;
  border-radius: 4px;
  margin: 0 -8px;
  padding-left: 8px;
  padding-right: 8px;
}

.recent-row:last-child {
  border-bottom: none;
}

.recent-row:hover {
  background: var(--hover-bg);
}

.recent-row-top {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
  overflow: hidden;
}

.recent-row-top .status-dot {
  width: 8px;
  height: 8px;
  flex-shrink: 0;
}

.recent-row-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--primary-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
}

.recent-row-group {
  font-size: 14px;
  color: var(--secondary-text);
  flex-shrink: 0;
  white-space: nowrap;
}

.recent-row-time {
  font-size: 12px;
  color: var(--secondary-text);
  flex-shrink: 0;
  margin-left: auto;
  padding-left: 8px;
}

.recent-row-preview {
  font-size: 13px;
  color: var(--secondary-text);
  margin-top: 3px;
  padding-left: 16px; /* align under name (dot width + gap) */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* Hide the old icon-btn compose in toolbar (kept for JS hook) */
.icon-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: transparent;
  color: var(--user-bubble);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 150ms;
  flex-shrink: 0;
}

.icon-btn:hover {
  background: var(--hover-bg);
}

/* The old in-toolbar compose button — hidden, FAB replaces it */
#new-session-btn.compose-btn {
  display: none;
}

/* --- Search Bar --- */
.search-bar {
  padding: 8px 16px;
  flex-shrink: 0;
  position: relative;
}

.search-bar input {
  width: 100%;
  padding: 8px 12px 8px 32px;
  border: none;
  border-radius: 10px;
  background: rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(0, 0, 0, 0.1);
  font-size: 15px;
  color: var(--primary-text);
  outline: none;
  font-family: inherit;
}

.search-bar input::placeholder {
  color: var(--secondary-text);
}

.search-icon {
  position: absolute;
  left: 26px;
  top: 50%;
  transform: translateY(-50%);
  color: rgba(26, 26, 26, 0.4);
  pointer-events: none;
}

/* --- Session List (home & sidebar) --- */
#session-list, #sidebar-list {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: 0;
}

#session-list {
  padding-bottom: 72px;
}

#sidebar-list {
  padding-top: 0;
}

/* --- Session Row --- */
.session-row {
  display: flex;
  align-items: center;
  padding: 14px 16px;
  cursor: pointer;
  position: relative;
  transition: background 150ms ease, opacity 150ms ease;
  border-radius: 0;
  margin: 0;
  opacity: 1;
}

/* Stale sessions (>24h) are visually dimmed */
.session-row.stale {
  opacity: 0.65;
}

.session-row.stale:hover {
  opacity: 1;
}

/* Subtle divider only — no box borders */
.session-row::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 70px; /* avatar (40px) + left-padding (16px) + gap (12px) + body-margin-left (2px) */
  right: 16px;
  height: 1px;
  background: var(--divider);
}

.session-row:last-child::after {
  display: none;
}

.session-row:hover {
  background: var(--hover-bg);
}

.session-row.selected {
  background: var(--selected-bg);
  border-radius: 0;
}

/* Selected text colors — keep readable on semi-transparent bg */
.session-row.selected .session-row-name {
  color: var(--primary-text);
}
.session-row.selected .session-row-time,
.session-row.selected .session-row-preview,
.session-row.selected .session-row-group {
  color: var(--secondary-text);
}

.session-row.selected .session-row-group {
  background: var(--input-bg);
}

.session-row.selected::after {
  display: none;
}

/* --- New Session Row --- */
#new-session-row {
  padding: 14px 16px;
  margin: 0;
}

/* --- New Session Active Row --- */
.new-session-active {
  background: var(--selected-bg);
}
.new-session-active .session-row-name {
  color: var(--primary-text);
}
.new-session-active .avatar-initial {
  color: #FFFFFF;
}
.new-session-active::after {
  display: none;
}

/* --- New Session Config Bar --- */
#new-session-config {
  flex-shrink: 0;
  border-bottom: 1px solid var(--divider);
  background: var(--surface);
}

.config-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border-bottom: 1px solid var(--divider);
  font-size: 14px;
}
.config-bar label {
  color: var(--secondary-text);
  font-weight: 500;
  flex-shrink: 0;
}
.config-bar input, .config-bar select {
  padding: 6px 10px;
  border: none;
  border-radius: 8px;
  background: var(--input-bg);
  color: var(--primary-text);
  font-size: 14px;
  font-family: inherit;
  outline: none;
  flex: 1;
  min-width: 0;
}
.config-bar select {
  max-width: 160px;
}

.config-message-area {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 16px;
}
.config-message-area textarea {
  flex: 1;
  padding: 8px 12px;
  border: none;
  border-radius: 10px;
  background: var(--input-bg);
  color: var(--primary-text);
  font-size: 14px;
  font-family: inherit;
  outline: none;
  resize: none;
  line-height: 1.4;
}
.config-message-area .start-btn {
  padding: 8px 16px;
  border: none;
  border-radius: 10px;
  background: var(--user-bubble);
  color: #FFFFFF;
  font-size: 14px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  transition: opacity 150ms;
  flex-shrink: 0;
}
.config-message-area .start-btn:hover {
  opacity: 0.9;
}
.config-message-area .start-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* --- Avatar Circle --- */
.session-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  position: relative;
}

.avatar-initial {
  color: #FFFFFF;
  font-size: 17px;
  font-weight: 600;
  line-height: 1;
  user-select: none;
}

/* Status dot overlaid on avatar (bottom-right) */
.session-avatar .status-dot {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 9px;
  height: 9px;
  border-radius: 50%;
  border: 2px solid var(--surface);
}

/* In split view sidebar, lift dot border off the sidebar bg */
#sidebar .session-avatar .status-dot {
  border-color: var(--surface);
}

/* --- Status Dots --- */
.status-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Avatar-specific overrides (size set above) */
.session-avatar .status-dot {
  display: block;
}

.status-dot.running {
  background: var(--status-running);
  animation: pulse-running 2s ease-in-out infinite;
}

.status-dot.done {
  background: var(--status-done);
}

.status-dot.idle {
  background: var(--status-idle);
}

.status-dot.error {
  background: var(--status-error);
}

/* Hide dot for unknown / empty status */
.session-avatar .status-dot:not(.running):not(.done):not(.idle):not(.error) {
  display: none;
}

@keyframes pulse-running {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Unread indicator: blue dot to the LEFT of avatar */
.session-row-unread {
  width: 10px;
  height: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-right: 2px;
}

.session-row-unread-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--user-bubble);
}

.session-row-unread.hidden-dot .session-row-unread-dot {
  visibility: hidden;
}

.session-row-body {
  flex: 1;
  min-width: 0;
  margin-left: 12px;
}

.session-row-top {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 8px;
}

/* Session name */
.session-row-name {
  font-size: 15px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--primary-text);
}

/* Timestamp */
.session-row-time {
  font-size: 12px;
  color: var(--secondary-text);
  flex-shrink: 0;
  text-align: right;
}

/* Preview text */
.session-row-preview {
  font-size: 13px;
  font-weight: 400;
  color: var(--secondary-text);
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 2px;
  line-height: 1.35;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  white-space: normal;
}

/* Group tag */
.session-row-group {
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--secondary-text);
  background: var(--input-bg);
  padding: 1px 6px;
  border-radius: 4px;
  margin-left: 6px;
  flex-shrink: 0;
}

/* Add-to-panel button on hover */
.session-row-add {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: 28px;
  height: 28px;
  border-radius: 14px;
  border: none;
  background: var(--surface);
  border: 1px solid var(--divider);
  color: var(--user-bubble);
  font-size: 18px;
  font-weight: 300;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 150ms;
  z-index: 2;
}

.session-row:hover .session-row-add {
  opacity: 1;
}

.session-row-add:hover {
  background: var(--selected-bg);
}

/* ============================================
   SPLIT VIEW — Sidebar + Conversations
   ============================================ */
#split-view {
  height: 100%;
  display: flex;
}

/* --- Sidebar --- */
#sidebar {
  width: 280px;
  min-width: 280px;
  background: var(--surface);
  border-right: 1px solid var(--divider);
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;
}

#sidebar .search-bar {
  padding: 8px 16px;
  flex-shrink: 0;
  border-top: 1px solid var(--divider);
}

/* --- Sidebar Header --- */
.sidebar-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--divider);
  background: var(--surface);
  flex-shrink: 0;
  min-height: 44px;
}

/* --- Back Button --- */
#back-btn {
  width: 28px;
  height: 28px;
  border-radius: 14px;
  border: none;
  background: transparent;
  color: var(--secondary-text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 150ms, color 150ms;
  flex-shrink: 0;
}

#back-btn:hover {
  background: var(--hover-bg);
  color: var(--primary-text);
}

#back-btn:active {
  background: var(--active-bg);
}

.sidebar-header-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--secondary-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* --- Conversation Area --- */
#conversation-area {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--bg);
}

#panels-container {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  overflow: hidden;
}

/* ============================================
   PANEL — Single conversation panel
   ============================================ */
.panel {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  border-left: 1px solid var(--divider);
  position: relative;
}

.panel:first-child {
  border-left: none;
}

.panel.active {
  border-top: 1px solid var(--active-border);
}

/* Panel layouts */
.panels-1 .panel { width: 100%; height: 100%; }
.panels-2 .panel { width: 50%; height: 100%; }
.panels-3 .panel:first-child { width: 50%; height: 100%; }
.panels-3 .panel:nth-child(2) { width: 50%; height: 50%; }
.panels-3 .panel:nth-child(3) { width: 50%; height: 50%; border-top: 1px solid var(--divider); }
.panels-4 .panel { width: 50%; height: 50%; }
.panels-4 .panel:nth-child(3),
.panels-4 .panel:nth-child(4) { border-top: 1px solid var(--divider); }

/* --- Panel Header --- */
.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  border-bottom: 1px solid var(--divider);
  background: var(--surface);
  flex-shrink: 0;
  min-height: 44px;
}

.panel-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.panel-name {
  font-size: 15px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--primary-text);
}

.panel-group-label {
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--secondary-text);
  background: var(--input-bg);
  padding: 1px 6px;
  border-radius: 4px;
}

.panel-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.panel-dir {
  display: none;
}

.panel-close-btn {
  width: 24px;
  height: 24px;
  border-radius: 12px;
  border: none;
  background: transparent;
  color: var(--secondary-text);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 150ms;
}

.panel-close-btn:hover {
  background: var(--hover-bg);
  color: var(--primary-text);
}

/* ============================================
   TERMINAL CONTAINER
   ============================================ */
.terminal-container {
  flex: 1;
  overflow: hidden;
  background: #ffffff;
  position: relative;
  max-width: 960px;
  margin: 0 auto;
  width: 100%;
}

/* xterm.js fills its container */
.terminal-container .xterm {
  height: 100%;
  padding: 8px 16px;
}

/* Disconnected overlay */
.terminal-disconnected {
  position: absolute;
  bottom: 12px;
  right: 12px;
  padding: 6px 12px;
  background: rgba(0, 0, 0, 0.08);
  color: #d92020;
  font-size: 12px;
  font-family: 'SF Mono', 'Menlo', monospace;
  border-radius: 6px;
  pointer-events: none;
  z-index: 5;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* ============================================
   RESPONSIVE LAYOUT
   ============================================ */

/* Phone */
@media (max-width: 768px) {
  /* Dashboard stacks vertically on mobile */
  .dashboard-columns {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto;
  }

  .dashboard-col {
    padding-right: 0;
  }

  .dashboard-col.col-recent {
    padding-left: 0;
    border-left: none;
    border-top: 1px solid var(--divider);
    padding-top: 24px;
    margin-top: 24px;
  }

  .dashboard-header {
    padding: 0 0 16px;
  }

  .dashboard-greeting {
    font-size: 24px;
  }
}

/* Phone (original breakpoint kept for split-view rules) */
@media (max-width: 600px) {
  #sidebar {
    display: none;
  }

  #split-view {
    flex-direction: column;
  }

  #conversation-area {
    width: 100%;
  }

  .panels-2 .panel,
  .panels-3 .panel,
  .panels-4 .panel {
    width: 100%;
    height: 100%;
  }

  /* Show only active panel on phone */
  .panel:not(.active) {
    display: none;
  }

  .panel-dir {
    display: none;
  }

  /* Phone back button in panel header */
  .phone-back-btn {
    display: flex;
    width: 32px;
    height: 32px;
    border-radius: 16px;
    border: none;
    background: transparent;
    color: var(--user-bubble);
    cursor: pointer;
    align-items: center;
    justify-content: center;
  }

  .home-header h1 {
    font-size: 28px;
  }

  /* Show big title on phone */
  .home-header {
    display: block;
  }

  /* Larger avatars on phone */
  .session-avatar {
    width: 48px;
    height: 48px;
  }
  .avatar-initial {
    font-size: 20px;
  }
  .session-avatar .status-dot {
    width: 11px;
    height: 11px;
  }

  /* Adjust divider offset for larger avatar */
  .session-row::after {
    left: 82px;
  }

  /* More generous row padding */
  .session-row {
    padding: 14px 16px;
  }
}

/* Tablet */
@media (min-width: 600px) and (max-width: 900px) {
  #sidebar {
    width: 240px;
    min-width: 240px;
  }

  .panels-3 .panel,
  .panels-4 .panel {
    width: 100%;
    height: 50%;
  }
}

/* Desktop */
@media (min-width: 900px) {
  /* Default styles apply */
}

/* Wide desktop */
@media (min-width: 1200px) {
  /* Full multi-panel support */
}

/* ============================================
   SCROLLBAR STYLING
   ============================================ */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

/* ============================================
   UTILITIES
   ============================================ */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  border: 0;
}

/* ============================================
   CONTEXT MENU
   ============================================ */
.context-menu {
  position: fixed;
  z-index: 1000;
  min-width: 180px;
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12), 0 1px 4px rgba(0, 0, 0, 0.08);
  border: 1px solid rgba(0, 0, 0, 0.08);
  padding: 4px;
  overflow: hidden;
}

.context-menu-item {
  display: block;
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: var(--primary-text);
  font-size: 13px;
  font-family: inherit;
  text-align: left;
  cursor: pointer;
  border-radius: 6px;
  transition: background 100ms;
}

.context-menu-item:hover {
  background: var(--hover-bg);
}

.context-menu-item.danger {
  color: var(--status-error);
}

.context-menu-divider {
  border: none;
  border-top: 1px solid var(--divider);
  margin: 4px 0;
}

/* Pin indicator on session rows */
.pin-indicator {
  font-size: 11px;
  color: var(--secondary-text);
  margin-left: 4px;
  flex-shrink: 0;
}

/* Inline rename input */
.session-rename-input {
  font-size: 15px;
  font-weight: 500;
  color: var(--primary-text);
  background: var(--input-bg);
  border: 1px solid var(--active-border);
  border-radius: 4px;
  padding: 1px 4px;
  outline: none;
  font-family: inherit;
  width: 100%;
  max-width: 200px;
}

/* Project section header: PROJECTS ... count | + */
.dashboard-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 0 12px 0;
}

.dashboard-section-header .dashboard-section-label {
  padding: 0;
}

.section-header-right {
  display: flex;
  align-items: center;
  gap: 0;
}

.section-header-count {
  font-size: 11px;
  font-weight: 600;
  color: var(--secondary-text);
  letter-spacing: 0.02em;
  padding-right: 8px;
}

.section-header-sep {
  width: 1px;
  height: 12px;
  background: var(--divider);
  flex-shrink: 0;
}

.add-project-btn {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: none;
  background: transparent;
  color: var(--secondary-text);
  font-size: 16px;
  font-weight: 300;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 8px;
  transition: background 150ms, color 150ms;
}

.add-project-btn:hover {
  background: var(--hover-bg);
  color: var(--primary-text);
}

/* Inline new project input row */
.new-project-input {
  width: 100%;
  font-size: 16px;
  font-weight: 500;
  color: var(--primary-text);
  background: var(--input-bg);
  border: 1px solid var(--active-border);
  border-radius: 6px;
  padding: 6px 10px;
  outline: none;
  font-family: inherit;
}

/* Color dot next to project name */
.project-color-dot {
  display: inline-block;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  margin-right: 8px;
  flex-shrink: 0;
  vertical-align: middle;
}


<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
